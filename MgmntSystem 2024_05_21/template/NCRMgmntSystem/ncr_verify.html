<!DOCTYPE html>
<html lang="en">
<head>
{% load static %}
  <title>NCOA02: NCR Verify Detail</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="{% static 'bootstrap-3.3.7/dist/css/bootstrap.min.css' %}">
  <script src="{% static 'js/jquery-3.5.1.js' %}"> </script>
  <script src="{% static 'js/bootstrap.min.js' %}"> </script>
  <style>
  .fakeimg {
    height: 200px;
    background: #aaa;
       
  }
  </style>
  <style type="text/css">
  
    .loader{
      right: 0;
      border: 6px solid #f3f3f3;
      border-top: 6px solid #3498db;
      border-radius: 50%;
      width: 45px;
      height: 45px;

      -webkit-animation: spin 2s linear infinite;
      animation: spin 2s linear infinite;
    }

    @-webkit-keyframes spin{
      0% { -webkit-transform: rotate(0deg);}
      100% { -webkit-transform: rotate(360deg);}
    }
  
    @keyframes spin {
      0%{transform:rotate(0deg);}
      100% { -webkit-transform: rotate(360deg);}
    }
    .custom-radio-list {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }
  
    .error {
        border: 2px red solid;
    }
  
    .error input, .error select {
        border: 2px red solid;
    }
  
    .radioErr {
        height: 18px;
        border-radius: 0px;
        top: -2px;
        left: -1px;
        background-color: red;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 2px solid white;
    }

    .sdmiheader {padding-top:10px;padding-bottom:10px;margin-bottom:10px;color:inherit;background-color:#4682B4}
   
    .sdmifooter {border-top:1px solid rgba(0,0,0,0.2);width:100%;bottom:0;position:fixed;padding-top:10px;padding-bottom:10px;margin-bottom:10px;color:inherit;background-color:#eee}
    
    .glyphicon.glyphicon-ok {font-size: 25px;}
   
    .glyphicon.glyphicon-remove {font-size: 25px;}
        
    #the-count {
        float: right;
        padding: 0.1rem 0 0 0;
        font-size: 0.975rem;
    }    
  </style>
  
  <script type="text/javascript">

      function validateAccept(process) {
         var ncrNo = $('#ncrNo').val();  // get the selected section ID from the HTML input
          var hidden_update_date = $('#hidden_update_date').val();          
          
          var url = $("#ncrVerifyForm").attr("get-latest-update-date-url");  
          
          $.ajax({ 
              url: url, 
              data: {
                  'ncr_no': ncrNo, 'hidden_update_date': hidden_update_date,
              },
              cache: false,
              success: function (data) {   // `data` is the return of the `load_project` view function                 
                  if (data.isLatest == 'TRUE') {
                      if (process == 'acceptA1' || process == 'acceptB1') {
                          if( $('#id_ic_incharge').val() == ''){
                              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
                              $("#id_ic_incharge").css({"border":"2px red solid"});
                          } else {
                          
                              $("#hidden_process").val(process);
                              $("#ncrVerifyForm").submit();
                              // Not necesarry just to let users know somethings loading 
                              if(process == 'acceptA1'){
                                  $("#pleasaeWait").modal("show");
                              }
                          }                       
                      } else {                          
                              $("#hidden_process").val(process);
                              $("#ncrVerifyForm").submit();  
                                                           
                              // Not necesarry just to let users know somethings loading 
                              if(process =='acceptE3F3'){
                                  $("#pleasaeWait").modal("show")
                              }
                      }                                        
                  } else {                  
                      $("#success_msg").html("");                   
                      $("#err_msg").html("<h3><font color='red'>At " + data.latest_update_date + ", this NCR was already updated by " + data.latest_update_by + "<br>Click <b>Display Latest Info</b> button to acquire NCR's latest information from database.</font></h3>");
                  }
              }
          });        
      } 
      
      function validateDeny(process) {      
          var ncrNo = $('#ncrNo').val();  // get the selected section ID from the HTML input
          var hidden_update_date = $('#hidden_update_date').val();          
          var url = $("#ncrVerifyForm").attr("get-latest-update-date-url");  
          
          $.ajax({ 
              url: url, 
              data: {
                  'ncr_no': ncrNo, 'hidden_update_date': hidden_update_date,
              },
              cache: false,
              success: function (data) {                     
                  if (data.isLatest == 'TRUE') {                 
                       $("#hidden_process").val(process);
                       $("#denyReason").modal("show");
                       
                       //START: Delete reginaldo-jsp 2025.02.12
                       //<!--Start modify for additional request Edric 2024/04/04 -->
                       //if($("#hidden_process").val() == "denyCancelRequest"){
                       //    
                       //    var button = document.getElementById("mCancelBtnCancel");
                       //    button.click();
                       //}
                      //<!--Start modify for additional request Edric 2024/04/04 -->
                      //END: Delete reginaldo-jsp 2025.02.12
                       
                  } else {                  
                      $("#success_msg").html("");                   
                      $("#err_msg").html("<h3><font color='red'>At " + data.latest_update_date + ", this NCR was already updated by " + data.latest_update_by + "<br>Click Reset button to acquire latest status.</font></h3>");
                  }
              }
          });
      }
                
      function validateInputB() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptB");
              $("#ncrVerifyForm").submit();         
          }    
      }   
      
      function validateInputC() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptC");
              $("#ncrVerifyForm").submit();         
          }    
      }   
      
      function validateInputD1() {
          if( $('#ca_approved_by_mgr').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#ca_approved_by_mgr").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptD1");
              $("#ncrVerifyForm").attr("action", "{% url 'NCRMgmntSystem:ncr_verify_accept' %}");   
              $("#ncrVerifyForm").attr("action", "/ncr/ncr_verify_accept");     

              $("#ncrVerifyForm").submit();         
          }    
      }   
      
      function validateInputD2() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptD2");
              $("#ncrVerifyForm").submit();         
          }    
      }   
      
      function validateInputE() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptE");
              $("#ncrVerifyForm").submit();         
          }    
      }   

      function validateInputF1() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptF1");
              $("#ncrVerifyForm").submit();         
          }    
      }   

      function validateInputF2() {
          if( $('#id_ic_incharge').val() == ''){
              $("#err_msg").html("<h3><font color='red'>Highlighted fields are required.</font></h3>");
              $("#id_ic_incharge").css({"border":"2px red solid"});
          } else {
              $("#hidden_process").val("acceptF2");
              $("#ncrVerifyForm").submit();         
          }    
      }   

      function cancelNCR_modal_func(a){
          $("#cancelNCR_modal").modal("show");
          if( a == "modal"){
            var button = document.getElementById("mCancelBtnCancel");
            button.click();
          }
      }

  </script>
    
</head>

<!--<body>-->
<body onload="init_screen()">

<!--
<div class="jumbotron text-center" style="margin-bottom:0">
-->

<nav class="navbar navbar-inverse">
    <div class="sdmiheader text-center" style="margin-bottom:0">
      <h1 style="font-family: Century Gothic; font-size: x-large;color: #eee;">SHI Designing and Manufacturing, Inc.</h1>
      <hr style="width: 450px;margin: auto;margin-bottom: 0;">
      <h1 style="font-family: Century Gothic;font-size: x-large;color: #eee;margin-right: 280px;margin-top: 10px;">株式会社 SDMI</h1>
    </div>


  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#">NCR Management System ::: </a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li><a href="/ncr/ncr_create_view_ins">Create NCR Detail</a></li>　  
        <li class="active"><a href="#">Verify NCR Detail</a></li>　 
        {% if isChecker or isSH or isGrpMgr %}
            <li><a href="/ncr/ncr_verify_list_view">Show NCR For Approval</a></li>　        
        {% endif %}                  
        <li><a href="/ncr/ncr_search_view_init">Search NCR</a></li>
        <li><a href="/ncr/projects_show">Show Project</a></li>　
        <li><a href="/ncr/employee_password_change_view/{{logged_user_chapa_no}}">Change Password</a></li>　　
        {% if ncrDetailMstr.rev_no >= 0 %}
            <input id="hidden_rev_no" type="hidden" value="{{data.rev_no}}">
            
            <li>
            <a href="/ncr/ncr_create_view_history/{{ncrDetailMstr.ncr_no}}/0/verify" >NCR History</a>
            </li>          
        {% endif %}
      </ul>　  
      <ul class="nav navbar-nav navbar-right">
        <li class="active"><a href="#"><span class="glyphicon glyphicon-user"></span> {{logged_username}}</a></li>  
        <li><a href="/ncr/logout">Log-out</a></li>　      
      </ul>
    </div>
  </div>
</nav>
<br><br><br><br><br><br><br><br><br>
<form 
    class="form-inline" 
    action="/ncr/ncr_verify_accept" 
    method="POST" 
    id="ncrVerifyForm" 
    get-latest-update-date-url="{% url 'NCRMgmntSystem:ajax_get_latest_update_date' %}"  
    novalidate>

{% csrf_token %}

<div class="container">
<!--
<div class="container-fluid">
-->
  <div id="success_msg" class="form-row"><h4><font color="blue">{{message}}</h4></font></div>
  <!-- Error messaging -->
  <div id="err_msg" class="form-row"><h4><font color="red">{{error_message}}</font></h4></div>
  {% if form.errors %}
  <div id="errors">
	<div class="inner">
	  <font color='red'>
	  <p>There were some errors in the information you entered. Please correct the following:</p>
		{{ form.non_field_errors }}
	  <ul>
		{% for field in form %}
		{% if field.errors %}<li>{{ field.label }}: {{ field.errors|striptags }}</li>{% endif %}
		{% endfor %}
	  </ul>
	  </font>
	</div>
  </div>
  <!-- /Error messaging -->
  {% endif %}

  <div class="row">
    <div class="col-sm-9">
      <button type="button" class="btn btn-primary active save-btn" id="btnReset">
        <!--START: Modify reginaldo-jsp 2025.01.30-->
        <!--<span class="glyphicon glyphicon-refresh"></span> Reset-->
        <span class="glyphicon glyphicon-refresh"></span> Display Latest Info
        <!--END: Modify reginaldo-jsp 2025.01.30-->
      </button>     

      <!--
      {% if ncrDetailMstr.status == '7' and a.phase == 'G'%}
        <button type="button" class="btn btn-primary active save-btn" id="seeCancelReason">
          View Cancel Request Reason
        </button>
       
      {% elif ncrDetailMstr.status != '2' and ncrDetailMstr.status != '5'  %} 
        <button type="button" class="btn btn-primary active save-btn" id="cancelNCR" value="button" onclick="cancelNCR_modal_func(this.value)">
         Cancel NCR
        </button>  
      {% endif %} 
      -->

      <!--START: Add reginaldo-jsp 2025.02.07-->
      {% if ncrDetailMstr.status == '7' and a.phase == 'G'%}
        <button type="button" class="btn btn-primary active save-btn" id="seeCancelReason">
          View Cancel Request Reason
        </button>
      {% endif %} 

      {%if show_cancel_ncr_btn and ncrDetailMstr.status != '7'%} 
        <button type="button" class="btn btn-primary active save-btn" id="cancelNCR" value="button" onclick="cancelNCR_modal_func(this.value)">
          Cancel NCR
        </button>  
      {% endif %} 

      {%if show_req_cancel_ncr_btn and ncrDetailMstr.status != '7'%} 
        <button type="button" class="btn btn-primary active save-btn" id="btnConfirmRequestToCancelNCR" >
          Request To Cancel NCR
        </button> 
      {% endif %} 
      <!--END: Add reginaldo-jsp 2025.02.07-->

    </div>
    <div class="col-sm-3">

    {% if ncrDetailMstr.close_date|date:"Y-m-d" == '' %}
      {% if ncrDetailMstr.deadline != None %}
        <h4><p class="text-right">Deadline: {{ncrDetailMstr.deadline|date:'d F o'}}
        {% if ncrDetailMstr.rev_no > 0 %}
            &nbsp;r.{{ncrDetailMstr.rev_no}}</p></h4>              
        {% endif %}
         </p></h4>  
      {% endif %}
    {% else %} 
    
      {% if ncrDetailMstr.status == '2' %}
        <h4><p class="text-right">Date Cancelled: {{ncrDetailMstr.close_date|date:'d F o'}}
        <input type="hidden" id="NCRstatus" value="Cancelled">
        {% if ncrDetailMstr.rev_no > 0 %}
            &nbsp;r.{{ncrDetailMstr.rev_no}}</p></h4>              
        {% endif %}
        </p></h4>               
      {% elif ncrDetailMstr.status == '5' %}
        <h4><p class="text-right">Date Closed: {{ncrDetailMstr.close_date|date:'d F o'}}
        <input type="hidden" id="NCRstatus" value="Closed">
        {% if ncrDetailMstr.rev_no > 0 %}
            &nbsp;r.{{ncrDetailMstr.rev_no}}</p></h4>              
        {% endif %}
        </p></h4>              
      {% endif %}
    {% endif %}  
    </div>             
  </div>
  
  <div class="row" style="background-color:#C0C0C0;">
    &nbsp;
    <div class="col-sm-6">
      <h4><strong>NONCONFORMANCE REPORT AND CORRECTIVE ACTION (Verify)</strong></h4>        
    </div>
    <div class="col-sm-6">
    {% if ncr_no_size == 'S' %}
      <strong><h2><small>Rec No:</small>{{ncrDetailMstr.ncr_no}}</h1></strong>
    {%else%}
      <strong><h3><small>Rec No:</small>{{ncrDetailMstr.ncr_no}}</h3></strong>
    {%endif%}  
      <center><h5>YYYY-MM-DD-Section-Project-Serial</h5></center>  
    </div>
  </div>
  
{% if check_phase != '0' and from_email_id == ncrDetailMstr.nc_conformed_by %}
  <div class="row" style="background-color:lightblue;">
{% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa %}
  <div class="row" style="background-color:lightblue;">
{%else%}
  <div class="row" style="background-color:#E5E4E2;">
{%endif%}
    <div class="col-sm-12">
      {{ form.source.label}}&nbsp;{{ form.source.0 }}&nbsp;{{ form.source.1}}&nbsp;{{ form.source.2 }}&nbsp;{{ form.source.3 }}&nbsp;{{ form.source.4}}&nbsp;{{ form.source.5 }}&nbsp;
      <input type="textbox" class="form-control" name="other_source" value="{{ncrDetailMstr.other_source}}" disabled/>
    </div>    
  </div>

  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        A. Nonconformance detail description</strong></h5>  
      </div>
    </div>
  </div>
  
  {% if check_phase != '0' and from_email_id == ncrDetailMstr.nc_conformed_by and ncrDetailMstr.nc_conformed_date|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {%else%}
  <div class="row" style="background-color:#E5E4E2;">
  {%endif%}
    <div class="col-sm-6">
      <div class="row">
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         {{form.classification.label}}
         
         {% if ncrDetailMstr.classification == '1' %}
             <input type="radio" id="classification_1_read_only" value="1" checked disabled>          
         {% else %}    
             <input type="radio" id="classification_1_read_only" value="1" disabled>
         {% endif %}
         <label for="classification_1_read_only">Minor</label>  
         {% if ncrDetailMstr.classification == '2' %}
             <input type="radio" id="classification_2_read_only" value="2" checked disabled>          
         {% else %}    
             <input type="radio" id="classification_2_read_only" value="2" disabled>
         {% endif %}
         <label for="classification_2_read_only">Major</label>
      </div>
      <div class="row">
        <textarea id="nc_detail_description_read_only" class="form-control"  rows="7" cols="75" disabled/>
          {{ncrDetailMstr.nc_detail_description}}
        </textarea>         
      </div> 
      &nbsp;
      <div class="row">
        <strong>Consumed MH: </strong>  
        <input type="number" class="form-control" style="width: 100px;" id="consumed_mh1_read_only" value="{{ncrDetailMstr.consumed_mh1}}"  disabled>
        <label>Hours</label>  
      </div>
      &nbsp;       
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>Discovered by:</strong>       
      </div> 
      <div class="row">
        Staff:&nbsp;<input type="textbox" class="form-control" id="nc_discovered_by_read_only" value="{{nc_discovered_by}}" disabled/>
        <!-- 2024/05/08 -->
        Email:&nbsp;<input type="textbox" class="form-control" id="discovered_by_email_read_only" value="{{nc_discovered_by_email}}" disabled>
      </div> 
      <div class="row">
        <strong>Confirmed by: </strong>                     
      </div>
      <div class="row">
        SH:&nbsp;<input type="textbox" class="form-control" id="nc_conformed_by_read_only" value="{{nc_conformed_by}}" disabled/>
        &nbsp;Date:&nbsp;<input type="textbox" class="form-control" id="nc_conformed_date_read_only" size="10" value="{{ncrDetailMstr.nc_conformed_date|date:"Y-m-d"}}" disabled/>
        {% if ncrDetailMstr.nc_conforme_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.nc_conforme_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}  
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.nc_conformed_by and ncrDetailMstr.ic_create_date|date:"Y-m-d" == '' %}
          {% if ncrDetailMstr.nc_conforme_status != '1' %}

          <!--2024/05/08 Edric 
          <input type="button" class="btn btn-success" name="acceptA" value="Accept" id="acceptA" onclick="javascript:validateAccept('acceptA1');">
          -->
            <!-- {% if email == 'None' %}     -->
                <!--<input type="button" id="acceptOpenAmodal"" class="btn btn-success" name="acceptA" value="Accept" id="acceptA" ">-->
             
            <!--{%else%} -->
                <input type="button" class="btn btn-success" name="acceptA" value="Accept" id="acceptA" onclick="javascript:validateAccept('acceptA1');">  
             <!--{%endif%}-->

          {% else %} 
            <input type="button" class="btn btn-success" name="acceptA" value="Accept" disabled>     
          {% endif %} 
          {% if ncrDetailMstr.nc_conforme_status != '0' %}
            <input type="button" class="btn btn-danger" name="denyA1" value="Deny" onclick="javascript:validateDeny('denyA1');"> 
          {% else %} 
            <button type="button" id="denyA1" class="btn btn-danger" name="denyA1" value="denyA1" disabled>Deny</button>
          {% endif %}                      
        {%endif%}       
        
      </div>   
    </div>          
  </div>
  
  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        B. Immediate Correction</strong></h5>  
      </div>
    </div>
  </div>
  
{% if check_phase != '0' and from_email_id == ncrDetailMstr.ic_approve_by and ncrDetailMstr.ic_approve_date|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
{% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
{%else%}
  <div class="row" style="background-color:#E5E4E2;">
{%endif%}
  
    <div class="col-sm-6">
      <div class="row">
        <textarea name="ic_description" id="ic_description" class="form-control"  rows="4" cols="75" disabled/>
          {{ncrDetailMstr.ic_description}}
        </textarea> 
      </div>
      &nbsp;
      <div class="row">
        <strong>Consumed MH: </strong>  
        <input type="number" class="form-control" style="width: 100px;" id="consumed_mh2_read_only" value="{{ncrDetailMstr.consumed_mh2}}"  disabled>
        <label>Hours</label>  
      </div>
      &nbsp;
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>By:</strong>
      </div> 
      <div class="row">
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.nc_conformed_by and ncrDetailMstr.ic_create_date|date:"Y-m-d" == '' %}
          {{form.ic_incharge}}
        {% else %}   
          <input type="textbox" name="ic_incharge"  id="ic_incharge" class="form-control" value="{{ic_incharge}}" disabled/>
        {% endif %}  
        Date:<input type="textbox" name="ic_create_date" id="ic_create_date" class="form-control" size="10" value="{{ncrDetailMstr.ic_create_date|date:"Y-m-d"}}" disabled/>
      </div> 
      <div class="row">
        <strong>Approved by:</strong>        
      </div>
      <div class="row">
        SH:<input type="textbox" class="form-control" name="ic_approve_by" value="{{ic_approve_by}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="date" size="10" value="{{ncrDetailMstr.ic_approve_date|date:"Y-m-d"}}" disabled/> 
        {% if ncrDetailMstr.ic_approve_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.ic_approve_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}  
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.ic_approve_by and ncrDetailMstr.rca_create_date|date:"Y-m-d" == '' %}
          {% if ncrDetailMstr.ic_approve_status != '1' %}
            <input type="button" class="btn btn-success" name="acceptB" value="Accept" onclick="javascript:validateAccept('acceptB1');">
          {% else %}   
            <input type="button" class="btn btn-success" name="acceptB" value="Accept" disabled>
          {% endif %} 
          {% if ncrDetailMstr.ic_approve_status != '0' %}
            <input type="button" class="btn btn-danger" name="denyB1" value="Deny" onclick="javascript:validateDeny('denyB1');">           
          {% else %}
            <button type="button" id="denyB1" class="btn btn-danger" name="denyB1" value="denyB1" disabled>Deny</button>
          {% endif %}                      
        {%endif%}                    
      </div>   
    </div>          
  </div>
  
  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        C. Root Cause Analysis(5 Whys, Fishbone, etc) <a href="https://shigroup-my.sharepoint.com/personal/ba00620467_shi-g_com/_layouts/15/onedrive.aspx?id=%2Fpersonal%2Fba00620467%5Fshi%2Dg%5Fcom%2FDocuments%2F2%2E0%20ISO9001%5F2015v%2F5%2E0%20NCR%20Web%20Application&originalPath=aHR0cHM6Ly9zaGlncm91cC1teS5zaGFyZXBvaW50LmNvbS86ZjovZy9wZXJzb25hbC9iYTAwNjIwNDY3X3NoaS1nX2NvbS9FbGpYLXNsdmVfaEtxTVY4M0xLVHVkZ0IzWV9lZ2hFdWpaaGV5LTl6emFmQ1VRP3J0aW1lPWpuc2JxMjV6MlVn/" target="_blank">[RCA How To]</a></strong></h5>  
      </div>
    </div>
  </div>
  
  {% if check_phase != '0' and from_email_id == ncrDetailMstr.rca_approve_by and ncrDetailMstr.rca_approve_date|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.ca_approved_by_mgr and ncrDetailMstr.ca_approved_date_by_mgr|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  
  {%else%}
  <div class="row" style="background-color:#E5E4E2;">
  {%endif%}
    <div class="col-sm-6"> 
      <div class="row">
        <textarea name="rca_description" id="rca_description" class="form-control"  rows="10" cols="75" disabled/>
          {{ncrDetailMstr.rca_description}}
        </textarea> 
      </div>
      &nbsp;
      <div class="row">
        <strong>Consumed MH: </strong>  
        <input type="number" class="form-control" style="width: 100px;" id="consumed_mh3_read_only" value="{{ncrDetailMstr.consumed_mh3}}"  disabled>
        <label>Hours</label>  
      </div>
      &nbsp;
      <div class="row">
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    
         {{form.ca_necessary.label}}&nbsp;{{form.ca_necessary.0}}&nbsp;{{form.ca_necessary.1}}         
      </div>       
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>By:</strong>
      </div> 
      <div class="row">
        In-charge:<input type="textbox" class="form-control" name="rca_incharge" id="rca_incharge" value="{{rca_incharge}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="rca_create_date" id="rca_create_date" size="10" value="{{ncrDetailMstr.rca_create_date|date:"Y-m-d"}}" disabled/> 
      </div> 
      <div class="row">
        <strong>Approved by:</strong>        
      </div>
      <div class="row">
        SH:<input type="textbox" class="form-control" name="rca_approve_by" id="rca_approve_by" value="{{rca_approve_by}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="rca_approve_date" id="rca_approve_date" size="10" value="{{ncrDetailMstr.rca_approve_date|date:"Y-m-d"}}" disabled/> 
        {% if ncrDetailMstr.rca_approve_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.rca_approve_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}  

        {% if check_phase != '0' and from_email_id == ncrDetailMstr.rca_approve_by and ncrDetailMstr.ca_approve_by_mgr_status != '1'%}
          {% if ncrDetailMstr.rca_approve_status != '1' %}
            <input type="button" class="btn btn-success" name="acceptC" value="Accept" onclick="javascript:validateAccept('acceptC1');">
          {% else %} 
            <input type="button" class="btn btn-success" name="acceptC" value="Accept" disabled>
          {% endif %} 
          {% if ncrDetailMstr.rca_approve_status != '0' %}
            <input type="button" class="btn btn-danger" name="denyC1" value="Deny" onclick="javascript:validateDeny('denyC1');"> 
          {% else %} 
            <button type="button" id="denyC1" class="btn btn-danger" name="denyC1" value="denyC1" disabled>Deny</button>  
          {% endif %}                      
        {%endif%}                       
      </div>   
    </div>          
  </div> 

{% if ncrDetailMstr.ca_necessary != '0' %}

  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        D. Corrective Action To The Cause</strong></h5>  
      </div>
    </div>
  </div>
  
  {% if check_phase != '0' and from_email_id == ncrDetailMstr.ca_checked_by_sh and ncrDetailMstr.ca_check_date_by_sh|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.ca_approved_by_mgr and ncrDetailMstr.ca_approved_date_by_mgr|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {%else%}
  <div class="row" style="background-color:#E5E4E2;">
  {%endif%}
    <div class="col-sm-6">
      <div class="row">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Target Date Of Accomplishment: <input type="textbox" class="form-control" name="ca_target_date" id="ca_target_date" size="10" value="{{ncrDetailMstr.ca_target_date|date:"Y-m-d"}}" disabled/>  
      </div>
      <div class="row">
        <textarea name="ca_description" id="ca_description" class="form-control"  rows="4" cols="75" disabled/>
          {{ncrDetailMstr.ca_description}}
        </textarea>  
        <br>       
      </div> 
      &nbsp;
      <div class="row">
        <strong>Consumed MH: </strong>  
        <input type="number" class="form-control" style="width: 100px;" id="consumed_mh4_read_only" value="{{ncrDetailMstr.consumed_mh4}}"  disabled>
        <label>Hours</label>  
      </div>
      &nbsp;      
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>Checked by:</strong>
      </div> 
      <div class="row">
        SH:<input type="textbox" class="form-control" name="ca_checked_by_sh" id="ca_checked_by_sh" value="{{ca_checked_by_sh}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="ca_check_date_by_sh" id="ca_check_date_by_sh" size="10" value="{{ncrDetailMstr.ca_check_date_by_sh|date:"Y-m-d"}}" disabled/> 
        {% if ncrDetailMstr.ca_check_by_sh_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.ca_check_by_sh_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}  
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.ca_checked_by_sh and ncrDetailMstr.ca_approve_by_mgr_status != '1'%}
          {% if ncrDetailMstr.rca_approve_date|date:"Y-m-d" == '' %}            
            {% if ncrDetailMstr.ca_check_by_sh_status != '1' %}  
              <input type="button" class="btn btn-success" name="acceptD1" value="Accept" disabled/>
              <button type="button" id="denyD" class="btn btn-danger" name="denyD1" value="denyD1" disabled>Deny</button>  
            {% endif %}               
          {%else%}
            {% if ncrDetailMstr.ca_check_by_sh_status != '1' and ncrDetailMstr.rca_approve_status != '0' %} 
              <input type="button" class="btn btn-success" name="acceptD1" value="Accept" onclick="javascript:validateAccept('acceptD1');"/> 
            {% else %}
              <input type="button" class="btn btn-success" name="acceptD1" value="Accept" disabled/> 
            {% endif %}  
            {% if ncrDetailMstr.ca_check_by_sh_status != '0' %}    
              <input type="button" class="btn btn-danger" name="denyD1" value="Deny" onclick="javascript:validateDeny('denyD1');">              
            {% else %}
              <button type="button" id="denyD1" class="btn btn-danger" name="denyD1" value="denyD1" disabled>Deny</button>  
            {% endif %}  
          {%endif%}          
        {%endif%} 
      </div> 
      <div class="row">
        <strong>Aprroved by:</strong>        
      </div>
      <div class="row">
        Grp Mgr:<input type="textbox" class="form-control" name="ca_approved_by_mgr" id="ca_approved_by_mgr" value="{{ca_approved_by_mgr}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="ca_approved_date_by_mgr" id="ca_approved_date_by_mgr" size="10" value="{{ncrDetailMstr.ca_approved_date_by_mgr|date:"Y-m-d"}}" disabled/>         
        {% if ncrDetailMstr.ca_approve_by_mgr_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.ca_approve_by_mgr_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %} 
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.ca_approved_by_mgr and ncrDetailMstr.ra_check_date_by_staff|date:"Y-m-d" == '' %}
          {% if ncrDetailMstr.ca_check_date_by_sh|date:"Y-m-d" == '' %}
            <input type="button" class="btn btn-success" name="acceptD2" value="Accept" disabled/>
            <button type="button" class="btn btn-danger" name="denyD2" value="denyD2" disabled>Deny</button>
          {%else%}
            {% if ncrDetailMstr.ca_approve_by_mgr_status != '1' %}  
              <input type="button" class="btn btn-success" name="acceptD2" value="Accept" onclick="javascript:validateAccept('acceptC2D2');">
            {% else %}  
              <input type="button" class="btn btn-success" name="acceptD2" value="Accept" disabled>
            {% endif %}  
            {% if ncrDetailMstr.ca_approve_by_mgr_status != '0' %}   
              <input type="button" class="btn btn-danger" name="denyC2D2" value="Deny" onclick="javascript:validateDeny('denyC2D2');"> 
            {% else %}
              <button type="button" id="denyC2D2" class="btn btn-danger" name="denyC2D2" value="denyC2D2" disabled>Deny</button>  
            {% endif %}  
          {%endif%}           
        {%endif%} 
      </div>   
    </div>          
  </div>
  
  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        E. Result Of Action</strong></h5>  
      </div>
    </div>
  </div>
  
  {% if check_phase != '0' and from_email_id == ncrDetailMstr.ra_check_by_sh and ncrDetailMstr.ra_check_date_by_sh|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_mgr and ncrDetailMstr.se_check_date_by_mgr|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {%else%}
  <div class="row" style="background-color:#E5E4E2;">
  {%endif%}
    <div class="col-sm-6">
      <div class="row">
        <textarea name="ra_description" id="ra_description" class="form-control"  rows="4" cols="75" disabled/>
          {{ncrDetailMstr.ra_description}}
        </textarea>        
      </div>
      <div class="row">
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         {{form.ra_action_effective.label}}&nbsp;{{form.ra_action_effective.0}}&nbsp;{{form.ra_action_effective.1}}
      </div>
      <div class="row">
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;{{form.ra_action_effective.2}}&nbsp;         
         <input type="textbox" class="form-control" name="ra_followup_date" id="ra_followup_date" size="10" value="{{ncrDetailMstr.ra_followup_date|date:"Y-m-d"}}" disabled/>  
      </div>       
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>By:</strong>
      </div> 
      <div class="row">
        In-Charge:<input type="textbox" class="form-control" name="ra_check_by_staff" id="ra_check_by_staff" value="{{ra_check_by_staff}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="ra_check_date_by_staff" id="ra_check_date_by_staff" size="10" value="{{ncrDetailMstr.ra_check_date_by_staff|date:"Y-m-d"}}" disabled/>                 
      </div> 
      <div class="row">
        <strong>Approved by:</strong>        
      </div>
      <div class="row">
        SH:<input type="textbox" class="form-control" name="ra_check_by_sh" id="ra_check_by_sh" value="{{ra_check_by_sh}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="ra_check_date_by_sh" id="ra_check_date_by_sh" size="10" value="{{ncrDetailMstr.ra_check_date_by_sh|date:"Y-m-d"}}" disabled/>
        {% if ncrDetailMstr.ra_check_by_sh_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.ra_check_by_sh_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}

        {% if check_phase != '0' and from_email_id == ncrDetailMstr.ra_check_by_sh and ncrDetailMstr.ca_approve_by_mgr_status == '1' and ncrDetailMstr.se_check_date_by_mgr|date:"Y-m-d" == '' and ncrDetailMstr.ra_action_effective != '2' %}
          {% if ncrDetailMstr.ra_check_by_sh_status != '1' %}
            <input type="button" class="btn btn-success" name="acceptE" value="Accept" onclick="javascript:validateAccept('acceptE1F1');">  
          {% else %}
            <input type="button" class="btn btn-success" name="acceptE" value="Accept" disabled>
          {% endif %} 
          {% if ncrDetailMstr.ra_check_by_sh_status != '0' %}
            <input type="button" class="btn btn-danger" name="denyE1F1" value="Deny" onclick="javascript:validateDeny('denyE1F1');"> 
          {% else %}
            <button type="button" id="denyE" class="btn btn-danger" name="denyE1F1" value="denyE1F1" disabled>Deny</button>
          {% endif %} 
        {%endif%}  
      </div>   
    </div>          
  </div>
  
  <div class="row form-inline" style="background-color:lightblue;">
    <div class="col-sm-12">
      <div class="row form-group">
        <h5><strong>
        F. Show Effectiveness</strong></h5>  
      </div>
    </div>
  </div>
  
  {% if check_phase != '0' and from_email_id == ncrDetailMstr.ra_check_by_sh and ncrDetailMstr.ra_check_date_by_sh|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_mgr and ncrDetailMstr.se_check_date_by_mgr|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {% elif check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d" == '' %}
  <div class="row" style="background-color:lightblue;">
  {%else%}
  <div class="row" style="background-color:#E5E4E2;">
  {%endif%}
    <div class="col-sm-6">
      <div class="row">

       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         {{form.se_ro_updated.label}}&nbsp;<!--{{form.se_ro_updated.1}}-->&nbsp{{form.se_ro_updated.0}};
         
         
      </div>
      <div class="row">
        <textarea name="se_description" id="se_description" class="form-control"  rows="4" cols="75" disabled/>
          {{ncrDetailMstr.se_description}}
        </textarea> 
      </div>        
    </div>  
    <div class="col-sm-6">
      <div class="row">
        <strong>Approved by:</strong>
      </div> 
      <div class="row">
      
        Grp Mgr:<input type="textbox" class="form-control" name="se_check_by_mgr" id="se_check_by_mgr" value="{{se_check_by_mgr}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="se_check_date_by_mgr" id="se_check_date_by_mgr" size="10" value="{{ncrDetailMstr.se_check_date_by_mgr|date:"Y-m-d"}}" disabled/> 
        {% if ncrDetailMstr.se_check_by_mgr_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.se_check_by_mgr_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}      
        
        
        
        <!-- Start modify due to bug Edric 2024/03/13  
        
        if check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_mgr
        -->
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_mgr and ncrDetailMstr.close_date|date:"Y-m-d" == '' and ncrDetailMstr.se_description != None and ncrDetailMstr.ra_action_effective != '2' %}
        <!-- End modify due to bug Edric 2024/03/13 -->

        {% if ncrDetailMstr.ra_check_date_by_sh|date:"Y-m-d" == ''  %}
            <input type="button" class="btn btn-success" name="acceptE2F2" value="Accept" disabled/>
            <button type="button" class="btn btn-danger" name="acceptE2F2" value="denyD2" disabled>Deny</button>
          
          {% elif ncrDetailMstr.se_description == ''%}
          
          {%else%}  
            {% if ncrDetailMstr.se_check_by_mgr_status != '1' %}
              <input type="button" class="btn btn-success" name="acceptE2F2" value="Accept" onclick="javascript:validateAccept('acceptE2F2');">
            {% else %}      
              <input type="button" class="btn btn-success" name="acceptE2F2" value="Accept" disabled>
            {% endif %}      
            {% if ncrDetailMstr.se_check_by_mgr_status != '0' %}
              <input type="button" class="btn btn-danger" name="denyE2F2" value="Deny" onclick="javascript:validateDeny('denyE2F2');"> 
            {% else %}      
              <button type="button" id="denyE2F2" class="btn btn-danger" name="denyE2F2" value="denyE2F2" disabled>Deny</button>
            {% endif %}        
    
          {%endif%}           
        {%endif%}             
      </div> 
      <div class="row">
        <strong>Aprroved by:</strong>        
      </div>
      <div class="row">
      
        QA Mgr:<input type="textbox" class="form-control" name="se_check_by_qa" id="se_check_by_qa" value="{{se_check_by_qa}}" disabled/>&nbsp;Date:<input type="textbox" class="form-control" name="se_check_date_by_qa" id="se_check_date_by_qa" size="10" value="{{ncrDetailMstr.se_check_date_by_qa|date:"Y-m-d"}}" disabled/>                 
        {% if ncrDetailMstr.se_check_by_qa_status == '1' %}
          <span class="glyphicon glyphicon-ok"></span>          
        {% elif ncrDetailMstr.se_check_by_qa_status == '0' %}
          <span class="glyphicon glyphicon-remove"></span>    
        {% endif %}
        
        {% if check_phase != '0' and from_email_id == ncrDetailMstr.se_check_by_qa and ncrDetailMstr.close_date|date:"Y-m-d" == '' and ncrDetailMstr.ra_action_effective != '2' %}        
          {% if ncrDetailMstr.se_check_by_mgr_status != '1' %}
            <input type="button" class="btn btn-success" name="acceptE3F3" value="Accept" disabled/>
            <button type="button" class="btn btn-danger" name="denyE3F3" value="denyD2" disabled>Deny</button>
          {%else%} 
        
            {% if data.se_check_by_qa_status != '1' %}
              
                <!-- Start Modifying for Additional Request Edric Marinas 2024/02/27
                <input type="button" class="btn btn-success" name="acceptE3F3" value="Close NCR" onclick="javascript:validateAccept('acceptE3F3');"> -->  
                
                <input type="button" class="btn btn-success" id="CloseE3F3" name="acceptE3F3" value="Close NCR">
                <!-- End Modifying for Additional Request Edric Marinas 2024/02/27 -->  
            
            {% else %}
              <input type="button" class="btn btn-success" name="acceptE3F3" value="Close NCR" disabled>
            {% endif %}
            {% if data.se_check_by_qa_status != '0' %}
              <input type="button" class="btn btn-danger" name="denyE3F3" value="Deny" onclick="javascript:validateDeny('denyE3F3');"> 
            {% else %}
              <button type="button" id="denyE3F3" class="btn btn-danger" name="denyE3F3" value="denyE3F3" disabled>Deny</button>
            {% endif %}                    
          {%endif%}
        {%endif%}  
      </div>   
    </div>          
  </div>

{%endif%}

  <br>
    
</div>
<!--2021.04.30 MODAL ADD START -->
<!--modal-->

<div class="modal fade" role="dialog" id="denyReason">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason</h3></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                
                    <label for="reason" class="col-form-label">Reason/s:</label><br>
                    <font color="red"><span id="rs_errormsg"></span></font>
                    <!-- Start Added id="reason" Modify Edric Charles C. Marinas 2024/02/20 -->
                    <textarea name="reason" id="reason" class="form-control"  rows="10" cols="75" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count">
                        <span id="current">0</span>
                        <span id="maximum">/ 1000</span>
                    </div>  
               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtn" data-dismiss="modal">Cancel</button>
                
    			<button type="button" class="btn btn-success" id="mDeny" >Save</button>
						
            </div>            
        </div>
    </div>
</div>

<!-- START: Added reginaldo-jsp 2025.02.07 -->
<div class="modal fade" role="dialog" id="confirm_request_to_cancel_ncr">
  <div class="modal-dialog modal-md">
      <div class="modal-content">
          <div class="modal-header">
              <center><h3 class="modal-title"><font color="blue">Request To Cancel NCR</font></h3>
                  <h5>Input reason then click on [<b>Request To Cancel NCR</b>] button<br> to send cancellation request for this NCR,<br> otherwise click [<b>Close</b>] button to close this confirmation window</h5>
              </center>
          </div>
          <div class="modal-body">
              <label for="reason" class="col-form-label">Reason of Cancellation:</label><br>
              <textarea class="form-control" rows="7" cols="75" id="cancellationReason" name="cancellationReason"></textarea >
          </div>            
          <div class="modal-footer">
              <button type="button" class="btn btn-warning" id="mCancelBtnCancel" data-dismiss="modal">Close</button>
              <input type="button" class="btn btn-success" name="btnProceedRequestToCancelNCR" value="Request To Cancel NCR" id="btnProceedRequestToCancelNCR" >
          </div>            
      </div>
  </div>
</div> 
<!-- END: Added reginaldo-jsp 2025.02.07 -->



<!-- 2024/05/08 Edric 
<div class="modal fade" role="dialog" id="acceptAmodal">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Are you sure you want to continue</h3></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                
                    If you click Continue, the NCR will be accepted without sending email to Discovered By.


               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtn" data-dismiss="modal">Cancel</button>
                <input type="button" class="btn btn-success" name="acceptA" value="Continue" id="acceptA" onclick="javascript:validateAccept('acceptA1');">
                

						
            </div>            
        </div>
    </div>
</div>
-->

<div id="cancelNCRmodal" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header flex-column">
				<div class="icon-box">
					<i class="material-icons">&#xE5CD;</i>
				</div>						
				<h4 class="modal-title w-100">Send cancel request to SH</h4>	
				Changes wont be saved if you request for NCR cancellation                
			</div>
			<div class="modal-body">
                <p>
				   <label for="reason" class="col-form-label" id="reason">Reason/s:</label>
				   <textarea  class="form-control"  rows="7" cols="75" id="cancelReason"></textarea>
				</p>
			</div>
			<div class="modal-footer justify-content-center">
				<button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-success" id="cancelContinue" name="cancelContinue" value="cancelContinue" onclick="request_cancel()">Continue</button>
			</div>
		</div>
	</div>
</div> 

<!-- Start adding for additional request Edric 2024/04/04 -->
{%if ncrDetailMstr.status == '7'%}
<div class="modal fade" role="dialog" id="cancelRequest_modal">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title"><font color="blue">Request To Cancel NCR</font></h3>
                    <h5>This NCR was requested to be cancelled</h5>
                </center>
            </div>
            <div class="modal-body">
                <label for="reason" class="col-form-label">Reason/s:</label><br>
                <textarea class="form-control" rows="7" cols="75" disabled>{{a.reason}}</textarea >
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnCancel" data-dismiss="modal">Close</button>

                <!-- START: Modify reginaldo-jsp 2025.01.30 -->
                <!-- 
                <button type="button" id="" class="btn btn-danger" name="" value="" onclick="javascript:validateDeny('denyCancelRequest');" >Deny</button>
                <button type="button" class="btn btn-primary active save-btn" id="cancelNCR" value="modal" onclick="cancelNCR_modal_func(this.value)">Cancel NCR</button>    
                -->
                {%if show_cancel_ncr_btn %} 
                    <button type="button" id="btnDenyCancelNCR" class="btn btn-danger" name="" value="">Deny</button>
                    <button type="button" class="btn btn-primary active save-btn" id="btnAcceptCancelNCR" value="modal">Cancel NCR</button>    
                {% endif %}   
                <!-- END: Modify reginaldo-jsp 2025.01.30 -->
            </div>            
        </div>
    </div>
</div>          
{%endif%}

<div class="modal fade" role="dialog" id="cancelNCR_modal">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title"><font color="blue">Cancel NCR</font></h3>
                  <h5>Input reason then click on <b>Cancel NCR</b> button to cancel this NCR,<br> otherwise click <b>Close</b> button</h5>
                </center>
            </div>
            <div class="modal-body">
                                
                <label for="reason" class="col-form-label">Message:</label><br>
                <textarea class="form-control" rows="7" cols="75" id="cancelMessage" name="cancelMessage"></textarea >
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnCancel" data-dismiss="modal">Close</button>
                <!--<input type="button" class="btn btn-success" name="acceptA" value="Cancel NCR" id="acceptA" onclick="javascript:validateAccept('cancelNCRaccept');">-->
                <input type="button" class="btn btn-success" name="acceptA" value="Cancel NCR" id="acceptA" onclick="javascript:validateAccept('cancelNCR');">
            </div>            
        </div>
    </div>
</div>  
<!-- End modifying for additional request Edric 2024/04/04 -->

<!-- Start Modifying for Additional Requesst Edric Marinas 2024/02/27-->
<div class="modal fade" role="dialog" id="ro_warning">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title"><font color="red">WARNING!</font></h3></center>
            </div>
            <div class="modal-body">
               <h5>Major NCR can only be closed if RO Updated's 'YES checkbox' is checked.</h5>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtn" data-dismiss="modal">Cancel</button>
            </div>            
        </div>
    </div>
</div>
<!-- End Modifying for Additional Requesst Edric Marinas 2024/02/27-->

<!-- Start Modifying for Improvement Edric Marinas 2024/03/07-->
<div class="modal fade" role="dialog1" id="pleasaeWait">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title"><font color="blue">Please WAIT!</font></h3></center>
            </div>
            <div class="modal-body">
               <center><h5>Please wait a moment while sending email...<br><div class="loader" id="loader"></div></h5></center>
            </div>
            <div class="modal-footer">

            </div>          
        </div>
    </div>
</div>
<!-- End Modifying for Improvement Requesst Edric Marinas 2024/03/07-->

<!--
<div class="modal fade" role="dialog" id="denyReasonA1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br><small>A. Nonconformance detail description</small></h3></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="reasonA1" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonA1" id="reasonA1" class="form-control"  rows="10" cols="75" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count1">
                        <span id="current1">0</span>
                        <span id="maximum1">/ 1000</span>
                    </div>  
               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnA1" data-dismiss="modal">Cancel</button>                
				<button type="submit" class="btn btn-success" name="process" id="mDenyA1" value="denyA1">Save</button>
            </div>
            
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" id="denyReasonB1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br><small>B. Immediate Correction</small></h3></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="reasonB1" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonB1" id="reasonB1" class="form-control"  rows="10" cols="75" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count2">
                        <span id="current2">0</span>
                        <span id="maximum2">/ 1000</span>
                    </div>  
               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnB1" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyB1" value="denyB1">Save</button>
            </div>            
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" id="denyReasonC1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br><small>C. Root Cause Analysis(5 Whys, Fishbone, etc)
                {% if ncrDetailMstr.ca_description != '' and ncrDetailMstr.ca_description != None  %}
                  <br>D. Corrective Action to the cause
                {% endif %} 
        </small></h3></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="reasonC" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonC1" id="reasonC1" class="form-control"  rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count3">
                        <span id="current3">0</span>
                        <span id="maximum3">/ 1000</span>
                    </div>  
               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnC1" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyC1" value="denyC1">Save</button>
            </div>        
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" id="denyReasonD1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br><small>C. Root Cause Analysis(5 Whys, Fishbone, etc)<br>D. Corrective Action to the cause                   
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="reasonC" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonD1" id="reasonD1" class="form-control" rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count4">
                        <span id="current4">0</span>
                        <span id="maximum4">/ 1000</span>
                    </div>  
               </div>
            </div>            
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnD1" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyD1" value="denyD1">Save</button>
            </div>
            
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" id="denyReasonC2D2">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br></h3></center>
            </div>
            <div class="modal-body">
               <div class="form-group">
                   C. Root Cause Analysis(5 Whys, Fishbone, etc)
                   {% if ncrDetailMstr.ca_description != '' and ncrDetailMstr.ca_description != None %}
                     <br>D. Corrective Action to the cause
                   {% endif %} 
                   </div>
               <div class="form-group">
                    <label for="reasonC2" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonC2D2" id="reasonC2D2" class="form-control" rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count5">
                        <span id="current5">0</span>
                        <span id="maximum5">/ 1000</span>
                    </div>  
               </div>
            </div>           
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnC2D2" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyC2D2" value="denyC2D2">Save</button>
            </div>            
            
        </div>
    </div>
</div>

<div class="modal fade" role="dialog" id="denyReasonE1F1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br></h3></center>
            </div>
            <div class="modal-body">
               <div class="form-group">
                   C. Root Cause Analysis(5 Whys, Fishbone, etc)<br>
                   D. Corrective Action to the cause<br>
                   E. Result of Action
                   {% if ncrDetailMstr.se_description != '' and ncrDetailMstr.se_description != None %}
                     <br>F. Show Effectiveness
                   {% endif %} 
               </div>
               <div class="form-group">
                    <label for="reasonE1" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonE1" id="reasonE1F1" class="form-control" rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count6">
                        <span id="current6">0</span>
                        <span id="maximum6">/ 1000</span>
                    </div>  
               </div>
            </div>           
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnE1F1" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyE1F1" value="denyE1F1">Save</button>
            </div>            
            
        </div>
    </div>
</div>
<div class="modal fade" role="dialog" id="denyReasonE2F2">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br></h3></center>
            </div>
            <div class="modal-body">
               <div class="form-group">
                   C. Root Cause Analysis(5 Whys, Fishbone, etc)<br>
                   D. Corrective Action to the cause<br>
                   E. Result of Action
                   {% if ncrDetailMstr.se_description != '' and ncrDetailMstr.se_description != None %}
                     <br>F. Show Effectiveness
                   {% endif %} 
               </div>
               <div class="form-group">
                    <label for="reasonE2" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonE2F2" id="reasonE2F2" class="form-control" rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count7">
                        <span id="current7">0</span>
                        <span id="maximum7">/ 1000</span>
                    </div>  
               </div>
            </div>   
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnE2F2" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyE2F2" value="denyE2F2">Save</button>
            </div>                        
        </div>
    </div>
</div>
<div class="modal fade" role="dialog" id="denyReasonE3F3">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <center><h3 class="modal-title">Write the Deny reason<br></h3></center>
            </div>
            <div class="modal-body">
               <div class="form-group">
                   C. Root Cause Analysis(5 Whys, Fishbone, etc)<br>
                   D. Corrective Action to the cause<br>
                   E. Result of Action
                   {% if ncrDetailMstr.se_description != '' and ncrDetailMstr.se_description != None %}
                     <br>F. Show Effectiveness
                   {% endif %}  
               </div>
               <div class="form-group">
                    <label for="reasonE3" class="col-form-label">Reason/s:</label>
                    <textarea name="reasonE3F3" id="reasonE3F3" class="form-control" rows="4" cols="65" placeholder="-- Please input details for you deny reason here... --" maxlength="1000"/></textarea>
                    <div id="the-count8">
                        <span id="current8">0</span>
                        <span id="maximum8">/ 1000</span>
                    </div>  
               </div>
            </div>  
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="mCancelBtnE3F3" data-dismiss="modal">Cancel</button>
				<button type="submit" class="btn btn-success" name="process" id="mDenyE3F3" value="denyE3F3">Save</button>
            </div>            
        </div>
    </div>
</div>
-->

    <input type="hidden" id="ncrNo" name="ncrNo" value="{{ ncrDetailMstr.ncr_no }}"> 
    <input type="hidden" id="check_phase" name="check_phase" value="{{ check_phase }}"> 
    <input type="hidden" id="from_email_id" name="from_email_id" value="{{ from_email_id }}"> 

    {{form.hidden_process}}
    {{form.hidden_update_date}}

    <!--START: Add reginaldo-jsp 2025.02.11-->
    {{form.hidden_cancel_reason}}
    <!--END: Add reginaldo-jsp 2025.02.11-->
    
</form>
<br><br><br>
<div class="sdmifooter text-center" style="margin-bottom:0">
  <p> Copyright (C) 2021 SDMI. All Rights Reserved.</p>
</div>

<!--<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>-->

<script>
    
    $(function () {    
        $("#mDenyA1").attr("disabled", "disabled");
        $("#mDenyB1").attr("disabled", "disabled");
        $("#mDenyC1").attr("disabled", "disabled");
        $("#mDenyD1").attr("disabled", "disabled");
        $("#mDenyC2D2").attr("disabled", "disabled");
        $("#mDenyE1F1").attr("disabled", "disabled");
        $("#mDenyE2F2").attr("disabled", "disabled");
        $("#mDenyE3F3").attr("disabled", "disabled");
    
        $("#reasonA1").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyA1");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonB1").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyB1");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonC1").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyC1");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonD1").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyD1");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonC2D2").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyC2D2");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonE1F1").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyE1F1");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonE2F2").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyE2F2");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
        
        $("#reasonE3F3").keyup(function () {
            //Reference the Button.
            var btnSubmit = $("#mDenyE3F3");
 
            //Verify the TextBox value.
            if ($(this).val().trim() != "") {
                //Enable the Button when TextBox has value.
                btnSubmit.removeAttr("disabled");
            } else {
                //Disable the Button when TextBox is empty.
                btnSubmit.attr("disabled", "disabled");
            }
        });
    });
    
    $("#btnReset").click(function () {    
        $("#ncrVerifyForm").attr("action", "{% url 'NCRMgmntSystem:ncr_verify_view' ncrDetailMstr.ncr_no 'check_phase' 'None' 'None' from_email_id %}");  
        $("#ncrVerifyForm").submit(); 
    });
    
    function init_screen() {        
        if( $('#ic_create_date').val() != ''){
            $("#id_ic_incharge").attr('readonly','readonly');        
        } else {
            $("#id_ic_incharge").removeAttr('readonly');    
        }              
    }

    //<!-- Start adding for additional request Edric Marinas 2024/04/04 -->
    //$("#cancelRequest_modal").modal("show");
    $("#seeCancelReason").click(function(){
        $("#cancelRequest_modal").modal("show"); 
    })
    //<!-- End adding for additional request Edric Marinas 2024/04/04-->

    /*<!-- 2024/05/08
    $("#acceptOpenAmodal").click(function(){
        $("#acceptAmodal").modal("show");
    }); -->*/

     //<!--Start adding for Improvement Edric Marinas 2024/02/20 -->
    $("#reason").keyup(function(){  
        var reason = document.getElementById("reason").value;

        if (reason === "" ){ //<!-- If 'reason for deny' is blank -->
            $("#mDeny").removeAttr("type").attr("type","button"); //<!-- Submit button will change its type into normal button -->
            //<!-- changing it to normal 'button' will make it useless and will not proceed to target 'action' from <form> syntax -->
        }

        else{ // if 'reason of deny' is not empty 
            var contains_spaces_only = true;
             for(a = 0; a < reason.length ;a++){
                 if(reason[a] != " "){

                     contains_spaces_only = false;
                     break;
                 }
             }

              if( contains_spaces_only == false){
                  $("#mDeny").removeAttr("type").attr("type","submit"); //  it will change its button type into submit  
                 // making it submit button will let it proceed to the target 'action' of <form> syntax-->
              }
              else{
                  $("#mDeny").removeAttr("type").attr("type","button");
              }
        }
    });

    // error message for clicking save while it's 'button' type -->
    $("#mDeny").click(function(){

            if(this.type == "button"){

                $('#rs_errormsg').html("Please dont leave a blank");
            }

    });
    // <!--End adding for Improvement Edric Marinas 2024/02/20 -->




 
 
 
// 2021.05.20 modal start 
    // denyA1 
    $("#denyA1").click(function () {
        document.getElementById("mDenyA1").disabled = true;
        document.getElementById("reasonA1").addEventListener("keyup", enableDenyA1);
    });
    function enableDenyA1() {
        document.getElementById("mDenyA1").disabled = false;
    }
    // denyB1 
    $("#denyB1").click(function () {
        document.getElementById("mDenyB1").disabled = true;
        document.getElementById("reasonB1").addEventListener("keyup", enableDenyB1);
    });
    function enableDenyB1() {
        document.getElementById("mDenyB1").disabled = false;
    }
    // denyC1 
    $("#denyC1").click(function () {
        document.getElementById("mDenyC1").disabled = true;
        document.getElementById("reasonC1").addEventListener("keyup", enableDenyC1);
    });
    function enableDenyC1() {
        document.getElementById("mDenyC1").disabled = false;
    }
    // denyD 
    $("#denyD").click(function () {
        document.getElementById("mDenyD1").disabled = true;
        document.getElementById("reasonD1").addEventListener("keyup", enableDenyD);
    });
    function enableDenyD() {
        document.getElementById("mDenyD1").disabled = false;
    }
    // denyD1 
    $("#denyD1").click(function () {
        document.getElementById("mDenyD1").disabled = true;
        document.getElementById("reasonD1").addEventListener("keyup", enableDenyD);
    });
    function enableDenyD() {
        document.getElementById("mDenyD1").disabled = false;
    }
    // denyC2D2 
    $("#denyC2D2").click(function () {
        document.getElementById("mDenyC2D2").disabled = true;
        document.getElementById("reasonC2").addEventListener("keyup", enableDenyC2D2);
        document.getElementById("reasonD2").addEventListener("keyup", enableDenyC2D2);
    });
    function enableDenyC2D2() {
        document.getElementById("mDenyC2D2").disabled = false;
    }
    // denyE 
    $("#denyE").click(function () {
        document.getElementById("mDenyE1F1").disabled = true;
        document.getElementById("reasonE1").addEventListener("keyup", enableDenyE1F1);
        document.getElementById("reasonF1").addEventListener("keyup", enableDenyE1F1);
    });
    function enableDenyE1F1() {
        document.getElementById("mDenyE1F1").disabled = false;
    }    
    // denE2F2 
    $("#denyE2F2").click(function () {
        document.getElementById("mDenyE2F2").disabled = true;
        document.getElementById("reasonE2").addEventListener("keyup", enableDenyE2F2);
        document.getElementById("reasonF2").addEventListener("keyup", enableDenyE2F2);
    });
    function enableDenyE2F2() {
        document.getElementById("mDenyE2F2").disabled = false;
    }      
    // denyE3F3 
    $("#denyE3F3").click(function () {
        document.getElementById("mDenyE3F3").disabled = true;
        document.getElementById("reasonE3").addEventListener("keyup", enableDenyE2F3);
        document.getElementById("reasonF3").addEventListener("keyup", enableDenyE2F3);
    });
    function enableDenyE2F3() {
        document.getElementById("mDenyE3F3").disabled = false;
    }  
        
    // clear when CANCEL button click 
    $("#mCancelBtnA1").click(function () {
        $("#mDenyA1").attr("disabled", "disabled");
        document.getElementById("reasonA1").value = ""
    });
    $("#mCancelBtnB1").click(function () {
        $("#mDenyB1").attr("disabled", "disabled");
        document.getElementById("reasonB1").value = ""
    });
    $("#mCancelBtnC1").click(function () {
        $("#mDenyC1").attr("disabled", "disabled");
        document.getElementById("reasonC1").value = ""
    });
    $("#mCancelBtnD1").click(function () {
        $("#mDenyD1").attr("disabled", "disabled"); 
        document.getElementById("reasonD1").value = ""
    });
    $("#mCancelBtnC2D2").click(function () {
        $("#mDenyC2D2").attr("disabled", "disabled");
        document.getElementById("reasonC2").value = ""
        document.getElementById("reasonD2").value = ""
    });
    $("#mCancelBtnE1F1").click(function () {
        $("#mDenyE1F1").attr("disabled", "disabled");
        document.getElementById("reasonE1").value = ""
        document.getElementById("reasonF1").value = ""
    });
    $("#mCancelBtnE2F2").click(function () {
        $("#mDenyE2F2").attr("disabled", "disabled");
        document.getElementById("reasonE2").value = ""
        document.getElementById("reasonF2").value = ""
    });
    $("#mCancelBtnE3F3").click(function () {
        $("#mDenyE3F3").attr("disabled", "disabled");
        document.getElementById("reasonE3").value = ""
        document.getElementById("reasonF3").value = ""
    }); 
    //    
// 2021.05.20 modal end -->    



$('textarea').keyup(function() {
    
  var characterCount = $(this).val().length,
      current = $('#current'),
      maximum = $('#maximum'),
      theCount = $('#the-count');
    
  current.text(characterCount);
 
  
  /*This isn't entirely necessary, just playin around*/
  if (characterCount < 70) {
    current.css('color', '#666');
  }
  if (characterCount > 70 && characterCount < 90) {
    current.css('color', '#6d5555');
  }
  if (characterCount > 90 && characterCount < 100) {
    current.css('color', '#793535');
  }
  if (characterCount > 100 && characterCount < 120) {
    current.css('color', '#841c1c');
  }
  if (characterCount > 120 && characterCount < 139) {
    current.css('color', '#8f0001');
  }

  if (characterCount >= 140) {
    maximum.css('color', '#8f0001');
    current.css('color', '#8f0001');
    theCount.css('font-weight','bold');
  } else {
    maximum.css('color','#666');
    theCount.css('font-weight','normal');
  }


});


//<!-- Start Modifying for Additional Requesst Edric Marinas 2024/02/27-->
$("#CloseE3F3").click(function(){
    console.log()
    if($(classification_2_read_only).is(':checked') ){
        if($(se_ro_updated_0).is(':checked') ){

            javascript:validateAccept('acceptE3F3');
        }
        else{

            console.log("Major NCR can only be closed if RO Updated's YES checkbox is checked.");
            $("#ro_warning").modal("show");
        }
    }
    else{
        console.log("works");
        javascript:validateAccept('acceptE3F3');
    }


});                
//<!-- End Modifying for Additional Requesst Edric Marinas 2024/02/27-->

function cancelNCRmodal(){
  var button = document.getElementById("cancel_button_modal");
  button.click();
  $("#cancelNCRmodal").modal("show");
}

  //START: reginaldo-jsp 2025.02.07 
  $("#btnCancelNCR").click(function () {
    //var requestCancellationReason = document.getElementById('requestCancellationReason').value; 
    //$("#hidden_cancel_reason").val(requestCancellationReason);
    $("#hidden_process").val("cancelNCR");
    $("#ncrVerifyForm").submit();
  });

  $("#btnConfirmRequestToCancelNCR").click(function () {
    $("#confirm_request_to_cancel_ncr").modal("show");   
  });

  $("#btnProceedRequestToCancelNCR").click(function () {
    var cancellationReason = document.getElementById('cancellationReason').value; 
    $("#hidden_cancel_reason").val(cancellationReason); 
    $("#hidden_process").val("requestToCancelNCR");
    $("#ncrVerifyForm").submit();
  });

  $("#btnDenyCancelNCR").click(function () {
    $("#hidden_process").val("denyCancelRequest");
    $("#ncrVerifyForm").submit();
  });

  $("#btnAcceptCancelNCR").click(function () {
    $("#hidden_process").val("cancelNCRaccept");
    $("#ncrVerifyForm").submit();
  });
  
  //END: reginaldo-jsp 2025.02.07
</script>

<!--<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js'></script>-->
<script src="{% static 'js/v3.0.3_bootstrap.min.js' %}"> </script><!--3.4.1 bootsrap -->
</body>
</html>